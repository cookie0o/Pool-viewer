import{c as w,a as f,t as ae}from"../chunks/C-TkrDIZ.js";import{i as re}from"../chunks/D0H1u2mU.js";import{q as g,s as y,f as $,n as S,W as O,T as j,k,v as l,x as v,w as c,as as h,t as ne}from"../chunks/BRidpAwb.js";import{s as D}from"../chunks/CySQt-tR.js";import{o as oe}from"../chunks/CuDHcO3f.js";import{b as ie}from"../chunks/C9e8NiyL.js";import{I as P,L as le}from"../chunks/DYfb_TtJ.js";import{b as q}from"../chunks/DFtZBgu2.js";import{s as H}from"../chunks/CVAmKEYq.js";import{s as I,r as b}from"../chunks/BlYlK6Qh.js";function ce(t,s){g(s,!0);let o=b(s,["$$slots","$$events","$$legacy"]);P(t,I({name:"clock"},()=>o,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(a,r)=>{var e=w(),n=$(e);H(n,()=>s.children??S),f(a,e)},$$slots:{default:!0}})),y()}function de(t,s){g(s,!0);let o=b(s,["$$slots","$$events","$$legacy"]);P(t,I({name:"hash"},()=>o,{iconNode:[["line",{x1:"4",x2:"20",y1:"9",y2:"9"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21"}]],children:(a,r)=>{var e=w(),n=$(e);H(n,()=>s.children??S),f(a,e)},$$slots:{default:!0}})),y()}function pe(t,s){g(s,!0);let o=b(s,["$$slots","$$events","$$legacy"]);P(t,I({name:"microchip"},()=>o,{iconNode:[["path",{d:"M18 12h2"}],["path",{d:"M18 16h2"}],["path",{d:"M18 20h2"}],["path",{d:"M18 4h2"}],["path",{d:"M18 8h2"}],["path",{d:"M4 12h2"}],["path",{d:"M4 16h2"}],["path",{d:"M4 20h2"}],["path",{d:"M4 4h2"}],["path",{d:"M4 8h2"}],["path",{d:"M8 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-1.5c-.276 0-.494.227-.562.495a2 2 0 0 1-3.876 0C9.994 2.227 9.776 2 9.5 2z"}]],children:(a,r)=>{var e=w(),n=$(e);H(n,()=>s.children??S),f(a,e)},$$slots:{default:!0}})),y()}function me(t,s){g(s,!0);let o=b(s,["$$slots","$$events","$$legacy"]);P(t,I({name:"pickaxe"},()=>o,{iconNode:[["path",{d:"M14.531 12.469 6.619 20.38a1 1 0 1 1-3-3l7.912-7.912"}],["path",{d:"M15.686 4.314A12.5 12.5 0 0 0 5.461 2.958 1 1 0 0 0 5.58 4.71a22 22 0 0 1 6.318 3.393"}],["path",{d:"M17.7 3.7a1 1 0 0 0-1.4 0l-4.6 4.6a1 1 0 0 0 0 1.4l2.6 2.6a1 1 0 0 0 1.4 0l4.6-4.6a1 1 0 0 0 0-1.4z"}],["path",{d:"M19.686 8.314a12.501 12.501 0 0 1 1.356 10.225 1 1 0 0 1-1.751-.119 22 22 0 0 0-3.393-6.319"}]],children:(a,r)=>{var e=w(),n=$(e);H(n,()=>s.children??S),f(a,e)},$$slots:{default:!0}})),y()}function ve(t,s){g(s,!0);let o=b(s,["$$slots","$$events","$$legacy"]);P(t,I({name:"thumbs-up"},()=>o,{iconNode:[["path",{d:"M7 10v12"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"}]],children:(a,r)=>{var e=w(),n=$(e);H(n,()=>s.children??S),f(a,e)},$$slots:{default:!0}})),y()}function ue(t,s){g(s,!0);let o=b(s,["$$slots","$$events","$$legacy"]);P(t,I({name:"x"},()=>o,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(a,r)=>{var e=w(),n=$(e);H(n,()=>s.children??S),f(a,e)},$$slots:{default:!0}})),y()}function he(t){return t>=1e6?(t/1e6).toFixed(2)+" MH/s":t>=1e3?(t/1e3).toFixed(2)+" KH/s":t.toFixed(2)+" H/s"}function fe(t,s){return t.length>s?t.substring(0,s)+"...":t}function ge(t,s){const o=t*1e3;{const i=new Date,a=new Date(o),r=i.getTime()-a.getTime(),e=Math.floor(r/(1e3*60*60*24)),n=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),p=Math.floor(r%(1e3*60*60)/(1e3*60)),d=Math.floor(r%(1e3*60)/1e3),m=r%1e3;return e>0?`${e} day${e===1?"":"s"} ago`:n>0?`${n} hour${n===1?"":"s"} ago`:p>0?`${p} minute${p===1?"":"s"} ago`:d>0?`${d} second${d===1?"":"s"} ago`:`${m} millisecond${m===1?"":"s"} ago`}}function V(t){if(!t)return 0;const s={H:1,KH:1e3,MH:1e6,GH:1e9,TH:1e12,PH:1e15},o=t.trim().split(" ");if(o.length!==2)return 0;const[i,a]=o,r=s[a.toUpperCase()],e=parseFloat(i);return isNaN(e)||r===void 0?0:Math.round(e*r)}function T(t){if(!t)return 0;const[s]=t.trim().split(" "),o=parseInt(s,10);return isNaN(o)?0:o}function ye(t){var i;if(!((i=t==null?void 0:t.perWorkerStats)!=null&&i.length))return;const s=document.getElementById("miner-container");if(!s)return;const o=localStorage.getItem("sortingOrder");t.perWorkerStats.sort((a,r)=>{switch(o){case"1":return V(r.hashrate||"0 H")-V(a.hashrate||"0 H");case"2":return r.hashes-a.hashes;case"3":return T(r.expired||"0%")-T(a.expired||"0%");case"4":return T(r.invalid||"0%")-T(a.invalid||"0%");case"5":return r.lastShare-a.lastShare;default:return 0-V(a.hashrate||"0.00 H")}}),s.innerHTML="";for(const a of t.perWorkerStats){const{workerId:r,hashrate:e,hashes:n,expired:p,invalid:d,lastShare:m}=a,u=e!==void 0?e:"0.00 H",M=d?parseInt(d):0,N=p?parseInt(p):0,E=M+N,R=n-M,U=n-N,X=R>0?(E/(R+U)*100).toFixed(2):"0.00",L=fe(r,10),F=ge(m),_=document.createElement("div");_.className="miner-block preset-filled-surface-100-900",_.innerHTML=`
      <div style="margin-top: 0px; border-radius: 5px; height: 35px; display: flex; justify-content: center; align-items: center;" class="preset-filled-surface-100-900">
        <div class="grid grid-cols-6 gap-4 w-full text-center">
          <div style="display: flex; justify-content: center; align-items: center;">
            <p style="margin: 0;">xmrpool.eu</p>
          </div>
          <div style="display: flex; justify-content: center; align-items: center;">
            <p style="margin: 0;">${L}</p>
          </div>
          <div style="display: flex; justify-content: center; align-items: center;">
            <p style="margin: 0;">${u}/s</p>
          </div>
          <div style="display: flex; justify-content: center; align-items: center;">
            <p style="margin: 0;">${n}</p>
          </div>
          <div style="display: flex; justify-content: center; align-items: center;">
            <p style="margin: 0;">${E} (${X}%)</p>
          </div>
          <div style="display: flex; justify-content: center; align-items: center;">
            <p style="margin: 0;">${F}</p>
          </div>
        </div>
      </div>
    `,s.appendChild(_)}}async function $e(t){var a;const s=`monero_rate_${t}`,o=localStorage.getItem(s);if(o)try{const{rate:r,timestamp:e}=JSON.parse(o);if(Date.now()-e<36e5)return r}catch(r){console.warn("Failed to parse cached rate:",r)}const i=`https://api.coingecko.com/api/v3/simple/price?ids=monero&vs_currencies=${t}`;try{const e=await(await fetch(i)).json(),n=(a=e==null?void 0:e.monero)==null?void 0:a[t];return n!==void 0?(localStorage.setItem(s,JSON.stringify({rate:n,timestamp:Date.now()})),n):null}catch(r){return console.error("Error fetching Monero price:",r),null}}async function xe(t){const s=`https://web.xmrpool.eu:8119/stats_address?address=${t}&longpoll=false`,o=localStorage.getItem("dataTimestamp_XMRPOOLEU"),i=Date.now();try{if(!localStorage.getItem("XMRPOOLEU"))a=await(await fetch(s)).json();else var a=JSON.parse(localStorage.getItem("XMRPOOLEU")||"").data;if(o&&i-parseInt(o)<5*60*1e3?((localStorage.getItem("address")||"")!==a.address&&(a=await(await fetch(s)).json()),console.log("Data not 5 minutes old, using old data.")):a=await(await fetch(s)).json(),a.stats){const e=(parseFloat(a.stats.balance)/1e12).toFixed(7),n=a.stats.hashrate||"0",p=a.stats.paid||"",d=a.perWorkerStats&&Array.isArray(a.perWorkerStats)?a.perWorkerStats:[],m={balance:e,hashrate:n,payments:p,perWorkerStats:d,timestamp:i.toString(),data:a,address:t};localStorage.setItem("XMRPOOLEU",JSON.stringify(m)),localStorage.setItem("dataTimestamp_XMRPOOLEU",i.toString()),console.log("Fetched new data. XMRPOOLEU"),ye(m)}else console.error("Invalid data structure: XMRPOOLEU",a);return null}catch(r){return console.error("Error fetching Monero data: XMRPOOLEU",r),null}}var Me=ae('<div style="display: flex; justify-content: space-between; gap: 16px; width: 100%; height: 90px;"><div class="card preset-filled-surface-100-900 p-2 text-center svelte-76ik6m" style="flex-grow: 0.5;"><h5 class="h5">Total Hashrate</h5> <div class="data-block svelte-76ik6m"><p class="value svelte-76ik6m"> </p></div></div> <div class="card preset-filled-surface-100-900 p-2 text-center svelte-76ik6m" style="flex-grow: 1;"><h5 class="h5">Pool Balance</h5> <div class="data-block svelte-76ik6m"><p class="value svelte-76ik6m"> </p> <span class="vr border-l-4"></span> <p class="value svelte-76ik6m"> </p></div></div></div> <p class="middle-text svelte-76ik6m">Your Miner`s</p> <div class="grid grid-cols-6 gap-4 w-full text-center svelte-76ik6m"><div class="labels svelte-76ik6m"><!> <p style="margin: 0;">Pool</p></div> <div class="labels svelte-76ik6m"><!> <p style="margin: 0;">Worker ID</p></div> <div class="labels svelte-76ik6m"><!> <p style="margin: 0;">Hashrate</p></div> <div class="labels svelte-76ik6m"><!> <p style="margin: 0;">Accepted Hashed</p></div> <div class="labels svelte-76ik6m"><!> <p style="margin: 0;">Bad Hashes</p></div> <div class="labels svelte-76ik6m"><!> <p style="margin: 0;">Last Share</p></div></div> <div id="miner-container"></div>',1);function Ee(t,s){g(s,!1);let o="0",i=0,a=j("0"),r=j(0),e="eur",n=j(""),p=j(q[e]||e.toUpperCase());oe(async()=>{if(typeof window<"u"){let d=localStorage.getItem("address");if(d==null)window.location.replace(ie+"/settings"),alert("No Monero address defined.");else{await xe(d),e=localStorage.getItem("currency")||"usd";const m=localStorage.getItem("XMRPOOLEU");if(m){const u=JSON.parse(m);i=u.balance,o=u.hashrate}else console.log("No data found for XMRPOOLEU");O(a,he(parseInt(o))),O(r,i),O(p,q[e]||e.toUpperCase());const x=await $e(e);x!==null?O(n,(k(r)*x).toFixed(2)):(O(n,"Error"),O(p,""))}}}),re(),le(t,{title:"Home",children:(d,m)=>{var x=Me(),u=$(x),M=l(u),N=v(l(M),2),E=l(N),R=l(E,!0);c(E),c(N),c(M);var U=v(M,2),X=v(l(U),2),L=l(X),F=l(L);c(L);var _=v(L,4),G=l(_,!0);c(_),c(X),c(U),c(u);var K=v(u,4),C=l(K),Y=l(C);me(Y,{class:"w-4 h-5.7 pr-[2px]"}),h(2),c(C);var W=v(C,2),Z=l(W);pe(Z,{class:"w-4 h-5.7 pr-[2px]"}),h(2),c(W);var A=v(W,2),Q=l(A);de(Q,{class:"w-4 h-5.7 pr-[2px]"}),h(2),c(A);var J=v(A,2),ee=l(J);ve(ee,{class:"w-4 h-5.7 pr-[2px]"}),h(2),c(J);var B=v(J,2),te=l(B);ue(te,{class:"w-4 h-5.7 pr-[2px]"}),h(2),c(B);var z=v(B,2),se=l(z);ce(se,{class:"w-4 h-5.7 pr-[2px]"}),h(2),c(z),c(K),h(2),ne(()=>{D(R,k(a)),D(F,`${k(r)??""} XMR`),D(G,k(n)?`${k(n)} ${k(p)}`:"Loading...")}),f(d,x)},$$slots:{default:!0}}),y()}export{Ee as component};
